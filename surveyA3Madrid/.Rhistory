dataSurveyA3_carpooling <- dataSurveyA3 %>% filter(municipio=="Arganda"&!is.na(Barrio_Destino_Name)) # Son 602 observaciones
table(dataSurveyA3_carpooling$vehiculo,dataSurveyA3_carpooling$carpooling,useNA = c("ifany"))
table(dataSurveyA3_carpooling$carnet,dataSurveyA3_carpooling$carpooling,useNA = c("ifany"))
dataSurveyA3_carpooling <- dataSurveyA3_carpooling %>% filter(vehiculo!="No"& vehiculo!="Yes_Passenger")
contingencyTables("descuento_carpool","cluster_A_1",dataSurveyA3_carpooling)
modelo_tobit<-censReg::censReg(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message=FALSE)
# setwd("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Models_R")
setwd("~/OneDrive - UNED/Papers/Paper 3/Models_R")
library("lme4")
library("readxl")
library("tidyverse")
library("lmtest")
# Datos_Finales_Aux <- read_excel("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Models_Stata/Datos_Finales_Aux_FR_20191027.xlsx")
Datos_Finales_Aux <- read_excel("~/OneDrive - UNED/Papers/Paper 3/Models_Stata/Datos_Finales_Aux_FR_20191027.xlsx")
Datos_Finales_Aux<-Datos_Finales_Aux %>% select(-starts_with("P16"))%>% select(-starts_with("P17"))%>% select(-starts_with("P20"))%>% select(-starts_with("P21"))
# Output_Cluster <- read_excel("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Excels_Resultados/Output_Cluster.xlsx")
Output_Cluster <- read_excel("~/OneDrive - UNED/Papers/Paper 3/Excels_Resultados/Output_Cluster.xlsx")
Output_Cluster$CensusSection<-as.character(Output_Cluster$CensusSection)
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_A_1")]<-"Arg_Cluster_Income"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_2_A_4")]<-"Arg_Cluster_Age"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_A_4")]<-"Arg_Cluster_Women"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_4_A_7")]<-"Arg_Cluster_Right_Wing"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_RA_1")]<-"ArgRiv_Cluster_Income"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_2_RA_4")]<-"ArgRiv_Cluster_Age"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_RA_4")]<-"ArgRiv_Cluster_Women"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_4_RA_7")]<-"ArgRiv_Cluster_Right_Wing"
Output_Cluster<-Output_Cluster %>% select(-starts_with("Input_"))
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message=FALSE)
# setwd("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Models_R")
setwd("~/OneDrive - UNED/Papers/Paper 3/Models_R")
library("lme4")
library("readxl")
library("tidyverse")
library("lmtest")
# Datos_Finales_Aux <- read_excel("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Models_Stata/Datos_Finales_Aux_FR_20191027.xlsx")
Datos_Finales_Aux <- read_excel("~/OneDrive - UNED/Papers/Paper 3/Models_Stata/Datos_Finales_Aux_FR_20191027.xlsx")
Datos_Finales_Aux<-Datos_Finales_Aux %>% select(-starts_with("P16"))%>% select(-starts_with("P17"))%>% select(-starts_with("P20"))%>% select(-starts_with("P21"))
Datos_Finales_Aux$seccion_censal<-as.character(Datos_Finales_Aux$seccion_censal)
Datos_Finales_Aux<-Datos_Finales_Aux %>% mutate(CensusSection = case_when(
seccion_censal=="2812301042" ~ "2812301008",
seccion_censal=="2812301043" ~ "2812301019",
seccion_censal=="2812301044" ~ "2812301022",
seccion_censal=="2812301045" ~ "2812301037",
TRUE ~ seccion_censal))
# Output_Cluster <- read_excel("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Excels_Resultados/Output_Cluster.xlsx")
Output_Cluster <- read_excel("~/OneDrive - UNED/Papers/Paper 3/Excels_Resultados/Output_Cluster.xlsx")
Output_Cluster$CensusSection<-as.character(Output_Cluster$CensusSection)
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_A_1")]<-"Arg_Cluster_Income"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_2_A_4")]<-"Arg_Cluster_Age"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_A_4")]<-"Arg_Cluster_Women"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_4_A_7")]<-"Arg_Cluster_Right_Wing"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_RA_1")]<-"ArgRiv_Cluster_Income"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_2_RA_4")]<-"ArgRiv_Cluster_Age"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_RA_4")]<-"ArgRiv_Cluster_Women"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_4_RA_7")]<-"ArgRiv_Cluster_Right_Wing"
Output_Cluster<-Output_Cluster %>% select(-starts_with("Input_"))
Datos_full<-full_join(Datos_Finales_Aux,Output_Cluster,by="CensusSection")
Datos_full$elegiria_metro<-as.numeric(Datos_full$elegiria_metro)
Datos_full$elegiria_bus<-as.numeric(Datos_full$elegiria_bus)
Datos_full$current_toll<-factor(Datos_full$current_toll,levels=c("1","2"),labels=c("Si","No"))
Datos_full$wtp<-factor(Datos_full$wtp,levels = c("1","2","3"),labels=c("Si","No","No_Destino"))
Datos_full$abono_mensual<-factor(Datos_full$abono_mensual,levels = c("1","2"),labels=c("Si","No"))
Datos_full$carpooling<-factor(Datos_full$carpooling,levels=c("1","2"),labels=c("Si","No"))
Datos_full <- Datos_full %>% mutate(descuento_carpool=case_when(
carpooling=="No" ~ 0,
TRUE ~ 3.2-carpooling_descuento))
Datos_full$seccion_censal<-factor(Datos_full$seccion_censal)
Datos_full$cluster_A_1<-factor(Datos_full$cluster_A_1)
Datos_full$cluster_A_2<-factor(Datos_full$cluster_A_2)
Datos_full$cluster_A_4<-factor(Datos_full$cluster_A_4)
Datos_full$cluster_A_5<-factor(Datos_full$cluster_A_5)
Datos_full$cluster_A_7<-factor(Datos_full$cluster_A_7)
Datos_full$cluster_A_8<-factor(Datos_full$cluster_A_8)
Datos_full$cluster_A_10<-factor(Datos_full$cluster_A_10)
Datos_full$cluster_A_11<-factor(Datos_full$cluster_A_11)
Datos_full$cluster_RA_1<-factor(Datos_full$cluster_RA_1)
Datos_full$cluster_RA_2<-factor(Datos_full$cluster_RA_2)
Datos_full$cluster_RA_3<-factor(Datos_full$cluster_RA_3)
Datos_full$cluster_RA_4<-factor(Datos_full$cluster_RA_4)
Datos_full$cluster_RA_5<-factor(Datos_full$cluster_RA_5)
Datos_full$cluster_RA_6<-factor(Datos_full$cluster_RA_6)
Datos_full$cluster_RA_7<-factor(Datos_full$cluster_RA_7)
Datos_full$cluster_RA_8<-factor(Datos_full$cluster_RA_8)
Datos_full$cluster_RA_9<-factor(Datos_full$cluster_RA_9)
Datos_full$cluster_RA_10<-factor(Datos_full$cluster_RA_10)
Datos_full$cluster_RA_11<-factor(Datos_full$cluster_RA_11)
Datos_full$cluster_RA_12<-factor(Datos_full$cluster_RA_12)
Datos_full$municipio <- factor(Datos_full$municipio, levels=c(28014,28123),labels = c("Arganda","Rivas"))
Datos_full$zona_metro<-factor(Datos_full$zona_metro)
Datos_full$Parada_bus<-factor(Datos_full$Parada_bus)
Datos_full$Distrito_Destino_Name<-factor(Datos_full$Distrito_Destino_Name)
Datos_full$Barrio_Destino_Name<-factor(Datos_full$Barrio_Destino_Name)
Datos_full$edad_cat<-factor(Datos_full$edad_cat,levels = c(1:6),labels=c("15 o menos","De 16 a 26","De 27 a 34","De 35 a 49","De 50 a 64","Mayor de 64"))
Datos_full$genero<-factor(Datos_full$genero,levels = c(1,2),labels=c("Hombre","Mujer"))
Datos_full$ingreso<-factor(Datos_full$ingreso,levels = c(1,2,3,4,5,99),labels=c("Menos_900","900_1600","1600_2500","2500_3000","Mas_3000","NS_NC"))
Datos_full$estudios<-factor(Datos_full$estudios,levels = c(1:4),labels=c("Sin_estudios","Estudios_primarios","Estudios_Secundarios","Estudios_Universitarios"))
Datos_full$sit_laboral<- factor(Datos_full$sit_laboral,levels=c(1:9),labels=c("Employed","Student","Employed_Student","Unpaid_household","Retire","Pensiones","Unemployed_Looking","Unemployed_Not_Looking","Other"))
Datos_full$vehiculo <- factor(Datos_full$vehiculo,levels=c(1:5),labels=c("No","Yes_Driver","Yes_ST_Driver","Yes_No_Driver","Yes_Passenger"))
Datos_full$carnet <- factor(Datos_full$carnet, levels=c(1:5),labels=c("NO","DeMoto","DeCoche","DeMotoYCoche","NoProcede"))
Datos_full$abono <-factor(Datos_full$abono,levels = c(2,1),labels=c("No","Yes"))
Datos_full$frec_madrid<- factor(Datos_full$frec_madrid,levels=c(1:3),labels=c("More_3days","1-3days","1_2month"))
Datos_full$frec_viaje<- factor(Datos_full$frec_viaje,levels=c(1:4),labels=c("4 o mas dias a la semana","1-3 dias a la semana","1-2 veces al mes","Menos de una vez al mes"))
Datos_full$modo <- factor(Datos_full$modo, levels= c(1:7),labels=c("Coche","Motocicleta","Bus","Metro","Taxi","VTC","Bus_Discrecional"))
Datos_full$modo_bis <- factor(Datos_full$modo_bis, levels= c(1:8),labels=c("Coche","Motocicleta","Bus","Metro","Taxi","VTC","Bus_Discrecional","R3"))
Datos_full$tipo_dia <- factor(Datos_full$tipo_dia, levels=c(1:7),labels = c("Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"))
Datos_full$tipo_dia2 <- factor(Datos_full$tipo_dia2, levels=c("1","1","1","1","1","2","3"),labels = c("Weekday","Weekday","Weekday","Weekday","Weekday","Saturday","Sunday"))
Datos_full$motivo_viaje <- factor(Datos_full$motivo_viaje, levels=c(1:8),labels = c("Work_Studies","Working_Affairs","Personal_Affairs","Leisure","Shopping","Doctor","Visiting_Friends","Other"))
Datos_full$motivo_viaje_2<-factor(Datos_full$motivo_viaje_2, levels=c("1","2"),labels=c("Work_Studies","Non_Work_Studies"))
Datos_full$ruta<-factor(Datos_full$ruta,levels=c(1:2),labels=c("A3","R3"))
Datos_full$P15_B<-factor(Datos_full$P15_B,levels=c(1:2),labels=c("Conductor","Acompanante"))
Datos_full$hora_franja <- factor(Datos_full$hora_franja, levels=c("1","2","3","4","5","6"),labels = c("peak morning","non peak morning","afternoon","peak evening","non peak evening","night"))
Datos_full$solo <- factor(Datos_full$solo, levels = c(1:3),labels=c("Solo","Acompanado","Acompanado_Menores"))
Datos_full$combinar<- factor(Datos_full$combinar, levels = c(1:2),labels=c("Si","No"))
Datos_full$aspectos<- factor(Datos_full$aspectos, levels = c(1:4),labels=c("Tiempo de viaje por congestion (nivel de trafico)","Incidencias en el medio elegido: obras, accidentes, huelgas en transporte publico","Meteorologia","Protocolos de contaminacion en Madrid capital"))
Datos_full<-Datos_full %>% mutate(conocimiento=case_when(
current_toll_diff> -0.5 & current_toll_diff< 0.5 ~ 0,
current_toll_diff< -0.5 ~ 1,
current_toll_diff> 0.5 ~ 2,
current_toll == "No" ~ 3,
))
Datos_full$conocimiento<-factor(Datos_full$conocimiento)
Datos_full<-Datos_full %>% mutate(ahorrotiempo1=tiempo_viaje - Duracion_Coche_R3)
Datos_full<-Datos_full %>% mutate(tiempo2 = tiempo_viaje * tiempo_viaje)
Datos_full$Distancia_min_metro
openxlsx::write.xlsx(Datos_full,"Datos_full.xlsx")
dataSurveyA3<-Datos_full[,c("REGISTRO","municipio","seccion_censal","frec_madrid","genero","edad","edad_cat","sit_laboral","ingreso","estudios","carnet","vehiculo","abono","tipo_dia","tipo_dia2","P12","hora_franja","tiempo_viaje","motivo_viaje","motivo_viaje_2","modo","modo_bis","ruta","P15_B","combinar","solo","frec_viaje","aspectos","current_toll","current_toll_tarifa","current_toll_diff","conocimiento","wtp","wtp_tarifa","wtp_tarifa_2","abono_mensual","abono_mensual_tarifa","vineta_mensual_tarifa_2","carpooling","carpooling_descuento","carpooling_descuento_2","descuento_carpool","elegiria_bus_arganda","elegiria_bus_rivas","elegiria_bus","elegiria_metro_arganda","elegiria_metro_rivas","elegiria_metro","zona_metro","distancia_min_metro","Parada_bus","Distrito_Destino_Name","Barrio_Destino_Name","ahorrotiempo1","cluster_A_1","cluster_A_2","cluster_A_4","cluster_A_5","cluster_A_7","cluster_A_8","cluster_A_10","cluster_A_11","Arg_Cluster_Income","Arg_Cluster_Age","Arg_Cluster_Women","Arg_Cluster_Right_Wing","cluster_RA_1","cluster_RA_2","cluster_RA_3","cluster_RA_4","cluster_RA_5","cluster_RA_6","cluster_RA_7","cluster_RA_8","cluster_RA_9","cluster_RA_10","cluster_RA_11","cluster_RA_12","ArgRiv_Cluster_Income","ArgRiv_Cluster_Age","ArgRiv_Cluster_Women","ArgRiv_Cluster_Right_Wing")]
dataSurveyA3<-Datos_full[,c("REGISTRO","municipio","seccion_censal","frec_madrid","genero","edad","edad_cat","sit_laboral","ingreso","estudios","carnet","vehiculo","abono","tipo_dia","tipo_dia2","P12","hora_franja","tiempo_viaje","motivo_viaje","motivo_viaje_2","modo","modo_bis","ruta","P15_B","combinar","solo","frec_viaje","aspectos","current_toll","current_toll_tarifa","current_toll_diff","conocimiento","wtp","wtp_tarifa","wtp_tarifa_2","abono_mensual","abono_mensual_tarifa","vineta_mensual_tarifa_2","carpooling","carpooling_descuento","carpooling_descuento_2","descuento_carpool","elegiria_bus_arganda","elegiria_bus_rivas","elegiria_bus","elegiria_metro_arganda","elegiria_metro_rivas","elegiria_metro","zona_metro","Distancia_min_metro","Parada_bus","Distrito_Destino_Name","Barrio_Destino_Name","ahorrotiempo1","cluster_A_1","cluster_A_2","cluster_A_4","cluster_A_5","cluster_A_7","cluster_A_8","cluster_A_10","cluster_A_11","Arg_Cluster_Income","Arg_Cluster_Age","Arg_Cluster_Women","Arg_Cluster_Right_Wing","cluster_RA_1","cluster_RA_2","cluster_RA_3","cluster_RA_4","cluster_RA_5","cluster_RA_6","cluster_RA_7","cluster_RA_8","cluster_RA_9","cluster_RA_10","cluster_RA_11","cluster_RA_12","ArgRiv_Cluster_Income","ArgRiv_Cluster_Age","ArgRiv_Cluster_Women","ArgRiv_Cluster_Right_Wing")]
usethis::use_data(dataSurveyA3, overwrite = T)
devtools::document()
library(surveyA3Madrid)
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message=FALSE)
library(surveyA3Madrid)
data("dataSurveyA3")
force(dataSurveyA3)
force(dataSurveyA3)
table(dataSurveyA3$municipio,dataSurveyA3$carpooling,useNA = c("ifany"))
dataSurveyA3_carpooling <- dataSurveyA3 %>% filter(municipio=="Arganda"&!is.na(Barrio_Destino_Name)) # Son 602 observaciones
table(dataSurveyA3_carpooling$vehiculo,dataSurveyA3_carpooling$carpooling,useNA = c("ifany"))
table(dataSurveyA3_carpooling$carnet,dataSurveyA3_carpooling$carpooling,useNA = c("ifany"))
dataSurveyA3_carpooling <- dataSurveyA3_carpooling %>% filter(vehiculo!="No"& vehiculo!="Yes_Passenger")
table(dataSurveyA3_carpooling$carpooling,dataSurveyA3_carpooling$carpooling_descuento_2,useNA = c("ifany"))
contingencyTables("descuento_carpool","cluster_A_1",dataSurveyA3_carpooling)
modelo_tobit<-censReg::censReg(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
#distancia_min_metro
#ahorrotiempo1
modelo_tobit<-censReg::censReg(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+Distancia_min_metro, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
#distancia_min_metro
#ahorrotiempo1
modelo_tobit<-censReg::censReg(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
summary(dataSurveyA3_carpooling)
contingencyTables("conocimiento","municipio")
contingencyTables("conocimiento","municipio",dataSurveyA3_carpooling)
contingencyTables("conocimiento","current_toll_diff",dataSurveyA3_carpooling)
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message=FALSE)
# setwd("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Models_R")
setwd("~/OneDrive - UNED/Papers/Paper 3/Models_R")
library("lme4")
library("readxl")
library("tidyverse")
library("lmtest")
# Datos_Finales_Aux <- read_excel("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Models_Stata/Datos_Finales_Aux_FR_20191027.xlsx")
Datos_Finales_Aux <- read_excel("~/OneDrive - UNED/Papers/Paper 3/Models_Stata/Datos_Finales_Aux_FR_20191027.xlsx")
Datos_Finales_Aux<-Datos_Finales_Aux %>% select(-starts_with("P16"))%>% select(-starts_with("P17"))%>% select(-starts_with("P20"))%>% select(-starts_with("P21"))
Datos_Finales_Aux$seccion_censal<-as.character(Datos_Finales_Aux$seccion_censal)
Datos_Finales_Aux<-Datos_Finales_Aux %>% mutate(CensusSection = case_when(
seccion_censal=="2812301042" ~ "2812301008",
seccion_censal=="2812301043" ~ "2812301019",
seccion_censal=="2812301044" ~ "2812301022",
seccion_censal=="2812301045" ~ "2812301037",
TRUE ~ seccion_censal))
# Output_Cluster <- read_excel("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Excels_Resultados/Output_Cluster.xlsx")
Output_Cluster <- read_excel("~/OneDrive - UNED/Papers/Paper 3/Excels_Resultados/Output_Cluster.xlsx")
Output_Cluster$CensusSection<-as.character(Output_Cluster$CensusSection)
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_A_1")]<-"Arg_Cluster_Income"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_2_A_4")]<-"Arg_Cluster_Age"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_A_4")]<-"Arg_Cluster_Women"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_4_A_7")]<-"Arg_Cluster_Right_Wing"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_RA_1")]<-"ArgRiv_Cluster_Income"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_2_RA_4")]<-"ArgRiv_Cluster_Age"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_RA_4")]<-"ArgRiv_Cluster_Women"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_4_RA_7")]<-"ArgRiv_Cluster_Right_Wing"
Output_Cluster<-Output_Cluster %>% select(-starts_with("Input_"))
Datos_full<-full_join(Datos_Finales_Aux,Output_Cluster,by="CensusSection")
Datos_full$elegiria_metro<-as.numeric(Datos_full$elegiria_metro)
Datos_full$elegiria_bus<-as.numeric(Datos_full$elegiria_bus)
Datos_full$current_toll<-factor(Datos_full$current_toll,levels=c("1","2"),labels=c("Si","No"))
Datos_full$wtp<-factor(Datos_full$wtp,levels = c("1","2","3"),labels=c("Si","No","No_Destino"))
Datos_full$abono_mensual<-factor(Datos_full$abono_mensual,levels = c("1","2"),labels=c("Si","No"))
Datos_full$carpooling<-factor(Datos_full$carpooling,levels=c("1","2"),labels=c("Si","No"))
Datos_full <- Datos_full %>% mutate(descuento_carpool=case_when(
carpooling=="No" ~ 0,
TRUE ~ 3.2-carpooling_descuento))
Datos_full$seccion_censal<-factor(Datos_full$seccion_censal)
Datos_full$cluster_A_1<-factor(Datos_full$cluster_A_1)
Datos_full$cluster_A_2<-factor(Datos_full$cluster_A_2)
Datos_full$cluster_A_4<-factor(Datos_full$cluster_A_4)
Datos_full$cluster_A_5<-factor(Datos_full$cluster_A_5)
Datos_full$cluster_A_7<-factor(Datos_full$cluster_A_7)
Datos_full$cluster_A_8<-factor(Datos_full$cluster_A_8)
Datos_full$cluster_A_10<-factor(Datos_full$cluster_A_10)
Datos_full$cluster_A_11<-factor(Datos_full$cluster_A_11)
Datos_full$cluster_RA_1<-factor(Datos_full$cluster_RA_1)
Datos_full$cluster_RA_2<-factor(Datos_full$cluster_RA_2)
Datos_full$cluster_RA_3<-factor(Datos_full$cluster_RA_3)
Datos_full$cluster_RA_4<-factor(Datos_full$cluster_RA_4)
Datos_full$cluster_RA_5<-factor(Datos_full$cluster_RA_5)
Datos_full$cluster_RA_6<-factor(Datos_full$cluster_RA_6)
Datos_full$cluster_RA_7<-factor(Datos_full$cluster_RA_7)
Datos_full$cluster_RA_8<-factor(Datos_full$cluster_RA_8)
Datos_full$cluster_RA_9<-factor(Datos_full$cluster_RA_9)
Datos_full$cluster_RA_10<-factor(Datos_full$cluster_RA_10)
Datos_full$cluster_RA_11<-factor(Datos_full$cluster_RA_11)
Datos_full$cluster_RA_12<-factor(Datos_full$cluster_RA_12)
Datos_full$municipio <- factor(Datos_full$municipio, levels=c(28014,28123),labels = c("Arganda","Rivas"))
Datos_full$zona_metro<-factor(Datos_full$zona_metro)
Datos_full$Parada_bus<-factor(Datos_full$Parada_bus)
Datos_full$Distrito_Destino_Name<-factor(Datos_full$Distrito_Destino_Name)
Datos_full$Barrio_Destino_Name<-factor(Datos_full$Barrio_Destino_Name)
Datos_full$edad_cat<-factor(Datos_full$edad_cat,levels = c(1:6),labels=c("15 o menos","De 16 a 26","De 27 a 34","De 35 a 49","De 50 a 64","Mayor de 64"))
Datos_full$genero<-factor(Datos_full$genero,levels = c(1,2),labels=c("Hombre","Mujer"))
Datos_full$ingreso<-factor(Datos_full$ingreso,levels = c(1,2,3,4,5,99),labels=c("Menos_900","900_1600","1600_2500","2500_3000","Mas_3000","NS_NC"))
Datos_full$estudios<-factor(Datos_full$estudios,levels = c(1:4),labels=c("Sin_estudios","Estudios_primarios","Estudios_Secundarios","Estudios_Universitarios"))
Datos_full$sit_laboral<- factor(Datos_full$sit_laboral,levels=c(1:9),labels=c("Employed","Student","Employed_Student","Unpaid_household","Retire","Pensiones","Unemployed_Looking","Unemployed_Not_Looking","Other"))
Datos_full$vehiculo <- factor(Datos_full$vehiculo,levels=c(1:5),labels=c("No","Yes_Driver","Yes_ST_Driver","Yes_No_Driver","Yes_Passenger"))
Datos_full$carnet <- factor(Datos_full$carnet, levels=c(1:5),labels=c("NO","DeMoto","DeCoche","DeMotoYCoche","NoProcede"))
Datos_full$abono <-factor(Datos_full$abono,levels = c(2,1),labels=c("No","Yes"))
Datos_full$frec_madrid<- factor(Datos_full$frec_madrid,levels=c(1:3),labels=c("More_3days","1-3days","1_2month"))
Datos_full$frec_viaje<- factor(Datos_full$frec_viaje,levels=c(1:4),labels=c("4 o mas dias a la semana","1-3 dias a la semana","1-2 veces al mes","Menos de una vez al mes"))
Datos_full$modo <- factor(Datos_full$modo, levels= c(1:7),labels=c("Coche","Motocicleta","Bus","Metro","Taxi","VTC","Bus_Discrecional"))
Datos_full$modo_bis <- factor(Datos_full$modo_bis, levels= c(1:8),labels=c("Coche","Motocicleta","Bus","Metro","Taxi","VTC","Bus_Discrecional","R3"))
Datos_full$tipo_dia <- factor(Datos_full$tipo_dia, levels=c(1:7),labels = c("Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"))
Datos_full$tipo_dia2 <- factor(Datos_full$tipo_dia2, levels=c("1","1","1","1","1","2","3"),labels = c("Weekday","Weekday","Weekday","Weekday","Weekday","Saturday","Sunday"))
Datos_full$motivo_viaje <- factor(Datos_full$motivo_viaje, levels=c(1:8),labels = c("Work_Studies","Working_Affairs","Personal_Affairs","Leisure","Shopping","Doctor","Visiting_Friends","Other"))
Datos_full$motivo_viaje_2<-factor(Datos_full$motivo_viaje_2, levels=c("1","2"),labels=c("Work_Studies","Non_Work_Studies"))
Datos_full$ruta<-factor(Datos_full$ruta,levels=c(1:2),labels=c("A3","R3"))
Datos_full$P15_B<-factor(Datos_full$P15_B,levels=c(1:2),labels=c("Conductor","Acompanante"))
Datos_full$hora_franja <- factor(Datos_full$hora_franja, levels=c("1","2","3","4","5","6"),labels = c("peak morning","non peak morning","afternoon","peak evening","non peak evening","night"))
Datos_full$solo <- factor(Datos_full$solo, levels = c(1:3),labels=c("Solo","Acompanado","Acompanado_Menores"))
Datos_full$combinar<- factor(Datos_full$combinar, levels = c(1:2),labels=c("Si","No"))
Datos_full$aspectos<- factor(Datos_full$aspectos, levels = c(1:4),labels=c("Tiempo de viaje por congestion (nivel de trafico)","Incidencias en el medio elegido: obras, accidentes, huelgas en transporte publico","Meteorologia","Protocolos de contaminacion en Madrid capital"))
Datos_full<-Datos_full %>% mutate(conocimiento=case_when(
current_toll_diff>= -0.5 & current_toll_diff<= 0.5 ~ 0,
current_toll_diff< -0.5 ~ 1,
current_toll_diff> 0.5 ~ 2,
current_toll == "No" ~ 3,
))
Datos_full$conocimiento<-factor(Datos_full$conocimiento)
Datos_full<-Datos_full %>% mutate(ahorrotiempo1=tiempo_viaje - Duracion_Coche_R3)
Datos_full<-Datos_full %>% mutate(tiempo2 = tiempo_viaje * tiempo_viaje)
openxlsx::write.xlsx(Datos_full,"Datos_full.xlsx")
dataSurveyA3<-Datos_full[,c("REGISTRO","municipio","seccion_censal","frec_madrid","genero","edad","edad_cat","sit_laboral","ingreso","estudios","carnet","vehiculo","abono","tipo_dia","tipo_dia2","P12","hora_franja","tiempo_viaje","motivo_viaje","motivo_viaje_2","modo","modo_bis","ruta","P15_B","combinar","solo","frec_viaje","aspectos","current_toll","current_toll_tarifa","current_toll_diff","conocimiento","wtp","wtp_tarifa","wtp_tarifa_2","abono_mensual","abono_mensual_tarifa","vineta_mensual_tarifa_2","carpooling","carpooling_descuento","carpooling_descuento_2","descuento_carpool","elegiria_bus_arganda","elegiria_bus_rivas","elegiria_bus","elegiria_metro_arganda","elegiria_metro_rivas","elegiria_metro","zona_metro","Distancia_min_metro","Parada_bus","Distrito_Destino_Name","Barrio_Destino_Name","ahorrotiempo1","cluster_A_1","cluster_A_2","cluster_A_4","cluster_A_5","cluster_A_7","cluster_A_8","cluster_A_10","cluster_A_11","Arg_Cluster_Income","Arg_Cluster_Age","Arg_Cluster_Women","Arg_Cluster_Right_Wing","cluster_RA_1","cluster_RA_2","cluster_RA_3","cluster_RA_4","cluster_RA_5","cluster_RA_6","cluster_RA_7","cluster_RA_8","cluster_RA_9","cluster_RA_10","cluster_RA_11","cluster_RA_12","ArgRiv_Cluster_Income","ArgRiv_Cluster_Age","ArgRiv_Cluster_Women","ArgRiv_Cluster_Right_Wing")]
usethis::use_data(dataSurveyA3, overwrite = T)
devtools::document()
library(surveyA3Madrid)
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message=FALSE)
devtools::install_github("Fernan-tech/RPackages/surveyA3Madrid")
library(surveyA3Madrid)
data("dataSurveyA3")
table(dataSurveyA3$municipio,dataSurveyA3$carpooling,useNA = c("ifany"))
dataSurveyA3_carpooling <- dataSurveyA3 %>% filter(municipio=="Arganda"&!is.na(Barrio_Destino_Name)) # Son 602 observaciones
table(dataSurveyA3_carpooling$vehiculo,dataSurveyA3_carpooling$carpooling,useNA = c("ifany"))
table(dataSurveyA3_carpooling$carnet,dataSurveyA3_carpooling$carpooling,useNA = c("ifany"))
dataSurveyA3_carpooling <- dataSurveyA3_carpooling %>% filter(vehiculo!="No"& vehiculo!="Yes_Passenger")
table(dataSurveyA3_carpooling$carpooling,dataSurveyA3_carpooling$carpooling_descuento_2,useNA = c("ifany"))
contingencyTables("descuento_carpool","cluster_A_1",dataSurveyA3_carpooling)
library(surveyA3Madrid)
data("dataSurveyA3")
force(dataSurveyA3)
table(dataSurveyA3$municipio,dataSurveyA3$carpooling,useNA = c("ifany"))
dataSurveyA3_carpooling <- dataSurveyA3 %>% filter(municipio=="Arganda"&!is.na(Barrio_Destino_Name)) # Son 602 observaciones
table(dataSurveyA3_carpooling$vehiculo,dataSurveyA3_carpooling$carpooling,useNA = c("ifany"))
table(dataSurveyA3_carpooling$carnet,dataSurveyA3_carpooling$carpooling,useNA = c("ifany"))
dataSurveyA3_carpooling <- dataSurveyA3_carpooling %>% filter(vehiculo!="No"& vehiculo!="Yes_Passenger")
table(dataSurveyA3_carpooling$carpooling,dataSurveyA3_carpooling$carpooling_descuento_2,useNA = c("ifany"))
contingencyTables("descuento_carpool","cluster_A_1",dataSurveyA3_carpooling)
modelo_tobit<-censReg::censReg(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
#Distancia_min_metro Si añado esta variable Pr(>t) se jode.
#ahorrotiempo1. En cambio, no se jode si añado esta.
modelo_tobit<-censReg::censReg(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1+Distancia_min_metro, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
#Distancia_min_metro Si añado esta variable Pr(>t) se jode.
#ahorrotiempo1. En cambio, no se jode si añado esta.
modelo_tobit<-censReg::censReg(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
#Distancia_min_metro Si añado esta variable Pr(>t) se jode.
#ahorrotiempo1. En cambio, no se jode si añado esta.
View(dataSurveyA3)
?dataSurveyA3
devtools::document()
devtools::document()
devtools::document()
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message=FALSE)
# setwd("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Models_R")
setwd("~/OneDrive - UNED/Papers/Paper 3/Models_R")
library("lme4")
library("readxl")
library("tidyverse")
library("lmtest")
# Datos_Finales_Aux <- read_excel("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Models_Stata/Datos_Finales_Aux_FR_20191027.xlsx")
Datos_Finales_Aux <- read_excel("~/OneDrive - UNED/Papers/Paper 3/Models_Stata/Datos_Finales_Aux_FR_20191027.xlsx")
Datos_Finales_Aux<-Datos_Finales_Aux %>% select(-starts_with("P16"))%>% select(-starts_with("P17"))%>% select(-starts_with("P20"))%>% select(-starts_with("P21"))
Datos_Finales_Aux$seccion_censal<-as.character(Datos_Finales_Aux$seccion_censal)
Datos_Finales_Aux<-Datos_Finales_Aux %>% mutate(CensusSection = case_when(
seccion_censal=="2812301042" ~ "2812301008",
seccion_censal=="2812301043" ~ "2812301019",
seccion_censal=="2812301044" ~ "2812301022",
seccion_censal=="2812301045" ~ "2812301037",
TRUE ~ seccion_censal))
# Output_Cluster <- read_excel("C:/Users/romero/OneDrive - UNED/Papers/Paper 3/Excels_Resultados/Output_Cluster.xlsx")
Output_Cluster <- read_excel("~/OneDrive - UNED/Papers/Paper 3/Excels_Resultados/Output_Cluster.xlsx")
Output_Cluster$CensusSection<-as.character(Output_Cluster$CensusSection)
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_A_1")]<-"Arg_Cluster_Income"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_2_A_4")]<-"Arg_Cluster_Age"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_A_4")]<-"Arg_Cluster_Women"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_4_A_7")]<-"Arg_Cluster_Right_Wing"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_RA_1")]<-"ArgRiv_Cluster_Income"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_2_RA_4")]<-"ArgRiv_Cluster_Age"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_1_RA_4")]<-"ArgRiv_Cluster_Women"
colnames(Output_Cluster)[which(names(Output_Cluster)=="Input_Cl_4_RA_7")]<-"ArgRiv_Cluster_Right_Wing"
Output_Cluster<-Output_Cluster %>% select(-starts_with("Input_"))
Datos_full<-full_join(Datos_Finales_Aux,Output_Cluster,by="CensusSection")
Datos_full$elegiria_metro<-as.numeric(Datos_full$elegiria_metro)
Datos_full$elegiria_bus<-as.numeric(Datos_full$elegiria_bus)
Datos_full$current_toll<-factor(Datos_full$current_toll,levels=c("1","2"),labels=c("Si","No"))
Datos_full$wtp<-factor(Datos_full$wtp,levels = c("1","2","3"),labels=c("Si","No","No_Destino"))
Datos_full$abono_mensual<-factor(Datos_full$abono_mensual,levels = c("1","2"),labels=c("Si","No"))
Datos_full$carpooling<-factor(Datos_full$carpooling,levels=c("1","2"),labels=c("Si","No"))
Datos_full <- Datos_full %>% mutate(descuento_carpool=case_when(
carpooling=="No" ~ 0,
TRUE ~ 3.2-carpooling_descuento))
Datos_full$seccion_censal<-factor(Datos_full$seccion_censal)
Datos_full$cluster_A_1<-factor(Datos_full$cluster_A_1)
Datos_full$cluster_A_2<-factor(Datos_full$cluster_A_2)
Datos_full$cluster_A_4<-factor(Datos_full$cluster_A_4)
Datos_full$cluster_A_5<-factor(Datos_full$cluster_A_5)
Datos_full$cluster_A_7<-factor(Datos_full$cluster_A_7)
Datos_full$cluster_A_8<-factor(Datos_full$cluster_A_8)
Datos_full$cluster_A_10<-factor(Datos_full$cluster_A_10)
Datos_full$cluster_A_11<-factor(Datos_full$cluster_A_11)
Datos_full$cluster_RA_1<-factor(Datos_full$cluster_RA_1)
Datos_full$cluster_RA_2<-factor(Datos_full$cluster_RA_2)
Datos_full$cluster_RA_3<-factor(Datos_full$cluster_RA_3)
Datos_full$cluster_RA_4<-factor(Datos_full$cluster_RA_4)
Datos_full$cluster_RA_5<-factor(Datos_full$cluster_RA_5)
Datos_full$cluster_RA_6<-factor(Datos_full$cluster_RA_6)
Datos_full$cluster_RA_7<-factor(Datos_full$cluster_RA_7)
Datos_full$cluster_RA_8<-factor(Datos_full$cluster_RA_8)
Datos_full$cluster_RA_9<-factor(Datos_full$cluster_RA_9)
Datos_full$cluster_RA_10<-factor(Datos_full$cluster_RA_10)
Datos_full$cluster_RA_11<-factor(Datos_full$cluster_RA_11)
Datos_full$cluster_RA_12<-factor(Datos_full$cluster_RA_12)
Datos_full$municipio <- factor(Datos_full$municipio, levels=c(28014,28123),labels = c("Arganda","Rivas"))
Datos_full$zona_metro<-factor(Datos_full$zona_metro)
Datos_full$Parada_bus<-factor(Datos_full$Parada_bus)
Datos_full$Distrito_Destino_Name<-factor(Datos_full$Distrito_Destino_Name)
Datos_full$Barrio_Destino_Name<-factor(Datos_full$Barrio_Destino_Name)
Datos_full$edad_cat<-factor(Datos_full$edad_cat,levels = c(1:6),labels=c("15 o menos","De 16 a 26","De 27 a 34","De 35 a 49","De 50 a 64","Mayor de 64"))
Datos_full$genero<-factor(Datos_full$genero,levels = c(1,2),labels=c("Hombre","Mujer"))
Datos_full$ingreso<-factor(Datos_full$ingreso,levels = c(1,2,3,4,5,99),labels=c("Menos_900","900_1600","1600_2500","2500_3000","Mas_3000","NS_NC"))
Datos_full$estudios<-factor(Datos_full$estudios,levels = c(1:4),labels=c("Sin_estudios","Estudios_primarios","Estudios_Secundarios","Estudios_Universitarios"))
Datos_full$sit_laboral<- factor(Datos_full$sit_laboral,levels=c(1:9),labels=c("Employed","Student","Employed_Student","Unpaid_household","Retire","Pensiones","Unemployed_Looking","Unemployed_Not_Looking","Other"))
Datos_full$vehiculo <- factor(Datos_full$vehiculo,levels=c(1:5),labels=c("No","Yes_Driver","Yes_ST_Driver","Yes_No_Driver","Yes_Passenger"))
Datos_full$carnet <- factor(Datos_full$carnet, levels=c(1:5),labels=c("NO","DeMoto","DeCoche","DeMotoYCoche","NoProcede"))
Datos_full$abono <-factor(Datos_full$abono,levels = c(2,1),labels=c("No","Yes"))
Datos_full$frec_madrid<- factor(Datos_full$frec_madrid,levels=c(1:3),labels=c("More_3days","1-3days","1_2month"))
Datos_full$frec_viaje<- factor(Datos_full$frec_viaje,levels=c(1:4),labels=c("4 o mas dias a la semana","1-3 dias a la semana","1-2 veces al mes","Menos de una vez al mes"))
Datos_full$modo <- factor(Datos_full$modo, levels= c(1:7),labels=c("Coche","Motocicleta","Bus","Metro","Taxi","VTC","Bus_Discrecional"))
Datos_full$modo_bis <- factor(Datos_full$modo_bis, levels= c(1:8),labels=c("Coche","Motocicleta","Bus","Metro","Taxi","VTC","Bus_Discrecional","R3"))
Datos_full$tipo_dia <- factor(Datos_full$tipo_dia, levels=c(1:7),labels = c("Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"))
Datos_full$tipo_dia2 <- factor(Datos_full$tipo_dia2, levels=c("1","1","1","1","1","2","3"),labels = c("Weekday","Weekday","Weekday","Weekday","Weekday","Saturday","Sunday"))
Datos_full$motivo_viaje <- factor(Datos_full$motivo_viaje, levels=c(1:8),labels = c("Work_Studies","Working_Affairs","Personal_Affairs","Leisure","Shopping","Doctor","Visiting_Friends","Other"))
Datos_full$motivo_viaje_2<-factor(Datos_full$motivo_viaje_2, levels=c("1","2"),labels=c("Work_Studies","Non_Work_Studies"))
Datos_full$ruta<-factor(Datos_full$ruta,levels=c(1:2),labels=c("A3","R3"))
Datos_full$P15_B<-factor(Datos_full$P15_B,levels=c(1:2),labels=c("Conductor","Acompanante"))
Datos_full$hora_franja <- factor(Datos_full$hora_franja, levels=c("1","2","3","4","5","6"),labels = c("peak morning","non peak morning","afternoon","peak evening","non peak evening","night"))
Datos_full$solo <- factor(Datos_full$solo, levels = c(1:3),labels=c("Solo","Acompanado","Acompanado_Menores"))
Datos_full$combinar<- factor(Datos_full$combinar, levels = c(1:2),labels=c("Si","No"))
Datos_full$aspectos<- factor(Datos_full$aspectos, levels = c(1:4),labels=c("Tiempo de viaje por congestion (nivel de trafico)","Incidencias en el medio elegido: obras, accidentes, huelgas en transporte publico","Meteorologia","Protocolos de contaminacion en Madrid capital"))
Datos_full<-Datos_full %>% mutate(conocimiento=case_when(
current_toll_diff>= -0.5 & current_toll_diff<= 0.5 ~ 0,
current_toll_diff< -0.5 ~ 1,
current_toll_diff> 0.5 ~ 2,
current_toll == "No" ~ 3,
))
Datos_full$conocimiento<-factor(Datos_full$conocimiento)
Datos_full<-Datos_full %>% mutate(ahorrotiempo1=tiempo_viaje - Duracion_Coche_R3)
Datos_full<-Datos_full %>% mutate(tiempo2 = tiempo_viaje * tiempo_viaje)
openxlsx::write.xlsx(Datos_full,"Datos_full.xlsx")
dataSurveyA3<-Datos_full[,c("REGISTRO","municipio","seccion_censal","frec_madrid","genero","edad","edad_cat","sit_laboral","ingreso","estudios","carnet","vehiculo","abono","tipo_dia","tipo_dia2","P12","hora_franja","tiempo_viaje","motivo_viaje","motivo_viaje_2","modo","modo_bis","ruta","P15_B","combinar","solo","frec_viaje","aspectos","current_toll","current_toll_tarifa","current_toll_diff","conocimiento","wtp","wtp_tarifa","wtp_tarifa_2","abono_mensual","abono_mensual_tarifa","vineta_mensual_tarifa_2","carpooling","carpooling_descuento","carpooling_descuento_2","descuento_carpool","elegiria_bus_arganda","elegiria_bus_rivas","elegiria_bus","elegiria_metro_arganda","elegiria_metro_rivas","elegiria_metro","zona_metro","Distancia_min_metro","Parada_bus","Distrito_Destino_Name","Barrio_Destino_Name","ahorrotiempo1","cluster_A_1","cluster_A_2","cluster_A_4","cluster_A_5","cluster_A_7","cluster_A_8","cluster_A_10","cluster_A_11","Arg_Cluster_Income","Arg_Cluster_Age","Arg_Cluster_Women","Arg_Cluster_Right_Wing","cluster_RA_1","cluster_RA_2","cluster_RA_3","cluster_RA_4","cluster_RA_5","cluster_RA_6","cluster_RA_7","cluster_RA_8","cluster_RA_9","cluster_RA_10","cluster_RA_11","cluster_RA_12","ArgRiv_Cluster_Income","ArgRiv_Cluster_Age","ArgRiv_Cluster_Women","ArgRiv_Cluster_Right_Wing")]
usethis::use_data(dataSurveyA3, overwrite = T)
devtools::document()
devtools::document()
library(surveyA3Madrid)
library(surveyA3Madrid)
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message=FALSE)
#devtools::install_github("Fernan-tech/RPackages/surveyA3Madrid")
library(surveyA3Madrid)
data("dataSurveyA3")
table(dataSurveyA3$municipio,dataSurveyA3$carpooling,useNA = c("ifany"))
dataSurveyA3_carpooling <- dataSurveyA3 %>% filter(municipio=="Arganda"&!is.na(Barrio_Destino_Name)) # Son 602 observaciones
library(tidyverse)
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message=FALSE)
#devtools::install_github("Fernan-tech/RPackages/surveyA3Madrid")
library(surveyA3Madrid)
library(tidyverse)
data("dataSurveyA3")
table(dataSurveyA3$municipio,dataSurveyA3$carpooling,useNA = c("ifany"))
dataSurveyA3_carpooling <- dataSurveyA3 %>% filter(municipio=="Arganda"&!is.na(Barrio_Destino_Name)) # Son 602 observaciones
table(dataSurveyA3_carpooling$vehiculo,dataSurveyA3_carpooling$carpooling,useNA = c("ifany"))
table(dataSurveyA3_carpooling$carnet,dataSurveyA3_carpooling$carpooling,useNA = c("ifany"))
dataSurveyA3_carpooling <- dataSurveyA3_carpooling %>% filter(vehiculo!="No"& vehiculo!="Yes_Passenger")
table(dataSurveyA3_carpooling$carpooling,dataSurveyA3_carpooling$carpooling_descuento_2,useNA = c("ifany"))
contingencyTables("descuento_carpool","cluster_A_1",dataSurveyA3_carpooling)
modelo_tobit<-censReg::censReg(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
#Distancia_min_metro Si añado esta variable Pr(>t) se jode.
#ahorrotiempo1. En cambio, no se jode si añado esta.
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_A_1, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_A_2, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_A_4, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_A_5, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_A_7, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_A_8, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_A_10, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_A_11, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
?dataSurveyA3
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_1, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_2, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_3, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_4, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_5, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_6, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_7, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_8, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_9, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_10, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_11, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
modelo_tobit<-censReg::censReg(descuento_carpool~cluster_RA_12, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo_tobit)
install.packages("VGAM")
install.packages("VGAM")
?vglm
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message=FALSE)
VGAM::vglm(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1,tobit(),data=dataSurveyA3_carpooling)
library(VGAM)
VGAM::vglm(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1,tobit(),data=dataSurveyA3_carpooling)
?tobit
VGAM::vglm(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1,tobit(Lower=0),data=dataSurveyA3_carpooling)
install.packages("AER")
library(AER)
modelo1<-AER::tobit(escuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1,left = 0,data=dataSurveyA3_carpooling)
modelo1<-AER::tobit(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1,left = 0,data=dataSurveyA3_carpooling)
summary(modelo1)
modelo1<-AER::tobit(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1,left = 0,data=dataSurveyA3_carpooling)
summary(modelo1)
AER::tobit(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1,left = 0,data=dataSurveyA3_carpooling)
modelo1<-AER::tobit(descuento_carpool~ingreso+vehiculo+modo_bis+solo+tiempo_viaje+conocimiento+ahorrotiempo1,left = 0,data=dataSurveyA3_carpooling)
summary(modelo1)
modelo1<-AER::tobit(descuento_carpool~ingreso,left = 0,data=dataSurveyA3_carpooling)
summary(modelo1)
modelo1<-AER::tobit(descuento_carpool~ingreso+vehiculo,left = 0,data=dataSurveyA3_carpooling)
summary(modelo1)
modelo1<-AER::tobit(descuento_carpool~ingreso+modo_bis,left = 0,data=dataSurveyA3_carpooling)
summary(modelo1) #ingreso y vehiculo NO
modelo1<-AER::tobit(descuento_carpool~ingreso+modo_bis,left = 0,data=dataSurveyA3_carpooling)
modelo1<-AER::tobit(descuento_carpool~ingreso+solo,left = 0,data=dataSurveyA3_carpooling)
summary(modelo1) #ingreso y vehiculo NO ingreso+modo_bis NO
contingencyTables("ingreso","solo",dataSurveyA3_carpooling)
surveyA3Madrid::contingencyTables("ingreso","solo",dataSurveyA3_carpooling)
surveyA3Madrid::contingencyTables("ingreso","vehiculo",dataSurveyA3_carpooling)
surveyA3Madrid::contingencyTables("ingreso","modo_bis",dataSurveyA3_carpooling)
modelo1<-AER::tobit(descuento_carpool~ingreso+tiempo_viaje,left = 0,data=dataSurveyA3_carpooling)
summary(modelo1) #ingreso y vehiculo NO ingreso+modo_bis NO
modelo1<-AER::tobit(descuento_carpool~ingreso+tiempo_viaje+solo,left = 0,data=dataSurveyA3_carpooling)
summary(modelo1) #ingreso y vehiculo NO ingreso+modo_bis NO
surveyA3Madrid::contingencyTables("ingreso","conocimiento",dataSurveyA3_carpooling) # NO. Hay CEROS
modelo1<-AER::tobit(descuento_carpool~ingreso+tiempo_viaje+solo+conocimiento,left = 0,data=dataSurveyA3_carpooling)
summary(modelo1) #ingreso y vehiculo NO ingreso+modo_bis NO
modelo1<-AER::tobit(descuento_carpool~ingreso+tiempo_viaje+solo+conocimiento+ahorrotiempo1,left = 0,data=dataSurveyA3_carpooling)
summary(modelo1) #ingreso y vehiculo NO ingreso+modo_bis NO
modelo2<-censReg::censReg(descuento_carpool~ingreso+solo+tiempo_viaje+conocimiento+ahorrotiempo1, left=0, right=Inf,data=dataSurveyA3_carpooling)
summary(modelo2)
?usethis::use_vignette
use_vignette("Models Carpool", title = "models_carpool")
usethis::use_vignette("Models Carpool", title = "models_carpool")
usethis::use_vignette("models_carpool", title = "Models carpool")
tinytex::install_tinytex()
